# ============================================================================
# ATSPM 5.0 - External PostgreSQL Configuration Template
# ============================================================================
# Copy this file to: Atspm/.env
# Update the connection details for your PostgreSQL instance
# ============================================================================

# Database Server Configuration
# Change 'host.docker.internal' if:
# - Running APIs locally (not in Docker): Use 'localhost'
# - PostgreSQL on different machine: Use IP address or hostname
POSTGRES_HOST=host.docker.internal
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=YourPostgresPassword

# Database Connection Strings
CONFIG_CONNECTION=Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};Database=ATSPM-Config;Pooling=true;Timeout=30;Command Timeout=60;
AGGREGATION_CONNECTION=Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};Database=ATSPM-Aggregation;Pooling=true;Timeout=30;Command Timeout=60;
EVENTLOG_CONNECTION=Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};Database=ATSPM-EventLogs;Pooling=true;Timeout=30;Command Timeout=60;
IDENTITY_CONNECTION=Host=${POSTGRES_HOST};Port=${POSTGRES_PORT};Username=${POSTGRES_USER};Password=${POSTGRES_PASSWORD};Database=ATSPM-Identity;Pooling=true;Timeout=30;Command Timeout=60;

# Database Providers - DO NOT CHANGE for PostgreSQL
ConfigContext_Provider=PostgreSQL
AggregationContext_Provider=PostgreSQL
EventLogContext_Provider=PostgreSQL
IdentityContext_Provider=PostgreSQL

# Admin Configuration
ADMIN_EMAIL=admin@atspm.local
ADMIN_ROLE=Admin
ADMIN_PASSWORD=Admin123!
SEED_ADMIN=true

# Allowed Hosts
ALLOWED_HOSTS=*

# JWT Configuration
JWT_EXPIRE_DAYS=1
JWT_KEY=ATSPMProductionIdentityOpenSource2024
JWT_ISSUER=AvenueConsultants

# # Map Configuration
# REACT_APP_MAP_DEFAULT_LATITUDE=40.758701
# REACT_APP_MAP_DEFAULT_LONGITUDE=-111.876183
# REACT_APP_MAP_TILE_LAYER=https://tile.openstreetmap.org/{z}/{x}/{y}.png
# REACT_APP_MAP_TILE_ATTRIBUTION=Â© OpenStreetMap contributors
# REACT_APP_POWERED_BY_IMAGE_URL=https://www.aurigo.com/wp-content/uploads/2019/02/UDOT_Logo_CMYK.png
# REACT_APP_CONFIG_URL=/config

# Certificate Location
CERT_LOCATION=./nginx/certs:/root/.aspnet/https:ro

# Email Configuration (Optional)
EmailConfiguration__Host=smtp.example.com
EmailConfiguration__Port=587
EmailConfiguration__UserName=noreply@example.com
EmailConfiguration__Password=
EmailConfiguration__EnableSsl=true

# Watchdog Configuration (Optional)
WatchdogConfiguration__ScanDate=2025-01-15
WatchdogConfiguration__ConsecutiveCount=3
WatchdogConfiguration__LowHitThreshold=50
WatchdogConfiguration__MaximumPedestrianEvents=200
WatchdogConfiguration__MinimumRecords=500
WatchdogConfiguration__MinPhaseTerminations=50
WatchdogConfiguration__PercentThreshold=0.9
WatchdogConfiguration__PreviousDayPMPeakEnd=18
WatchdogConfiguration__PreviousDayPMPeakStart=17
WatchdogConfiguration__ScanDayEndHour=5
WatchdogConfiguration__ScanDayStartHour=1
WatchdogConfiguration__RampMainlineStartHour=15
WatchdogConfiguration__RampMainlineEndHour=19
WatchdogConfiguration__RampStuckQueueStartHour=1
WatchdogConfiguration__RampStuckQueueEndHour=4
WatchdogConfiguration__WeekdayOnly=false
WatchdogConfiguration__DefaultEmailAddress=atspm@example.com
WatchdogConfiguration__EmailAllErrors=false
WatchdogConfiguration__Sort=Location

# Device Configuration (Optional)
DeviceDownloaderConfiguration__DeviceDownloader__BasePath=
DeviceDownloaderConfiguration__DeviceDownloader__DeleteRemoteFile=false
DeviceDownloaderConfiguration__DeviceDownloader__Ping=true

EventLogImporterConfiguration__EventLogFileImporter__EarliestAcceptableDate=2020-01-01
EventLogImporterConfiguration__EventLogFileImporter__DeleteSource=false

EventLogUtility__SiemensDecoder=false

DeviceEventLoggingConfiguration__Path=
DeviceEventLoggingConfiguration__BatchSize=1000
DeviceEventLoggingConfiguration__ParallelProcesses=4
